<style type="text/css">
	table { 
		table-layout: fixed; 
		word-wrap: break-word; text-align: center; 
		margin-top:5px; margin-bottom:10px; padding-left: 10px; color:#333333;
		font-family:Verdana, sans-serif; font-size:12px; 
	}		
	.txt-align {
		text-align: left; !important;
	}
</style>
<% unless @wksalaryEntries.blank? %>
 <% 
	componentHash = Hash.new()
	total=0
	gross=0
	net=0
	userName = @wksalaryEntries[0].firstname + ' ' + @wksalaryEntries[0].lastname if !@wksalaryEntries[0].blank?
	@wksalaryEntries.each do |entry|
		componentHash[entry.component_type] = componentHash[entry.component_type].blank? ? [[entry.component_name,entry.amount,entry.currency,@userYTDAmountHash[entry.sc_component_id]]] :  componentHash[entry.component_type] << [entry.component_name,entry.amount,entry.currency,@userYTDAmountHash[entry.sc_component_id]]
	end 
 %>
<div id="time-rpt-dlg" style="overflow-x:auto;">
	<center><b>Payslip</b></center>
	<div>
	<div style="float:left">
		<table>
			<tr>
			
			<td class="txt-align" width="100px"><b><%= l(:label_period) %></b></td>
			<td class="txt-align" width="100px"> <%= @wksalaryEntries[0].salary_date %></td>
			<td class="txt-align" width="100px"><b><%= l(:label_emp_name) %></b></td>
			<td class="txt-align" width="100px"> : <%= userName %></td>
			<td class="txt-align" width="100px"><b><%= l(:label_employee_id) %></b></td>
			<td class="txt-align" width="100px">: <%=h @wksalaryEntries[0].id %></td>
			</tr>
			<tr>
				<td class="txt-align" width="100px"><b>Join Date</b></td>
				<td class="txt-align" width="100px"><%=h @wksalaryEntries[0].joining_date %></td>
			</tr>		
		</table>
	</div>
	
	</div>
	<div style="clear:both;"></div>
	
	<table border="1" style="border-collapse:collapse;" cellspacing="0", frame="box">
	<thead bgcolor="#e6e6e6">
		<tr  class="time-entry <%= cycle("odd", "even") %>">
			<th colspan="3"  width="500px" ><%= l(:label_earning)%></th>
			<th colspan="3"  width="500px"><%= l(:label_deduction)%></th>
		</tr>
		<tr>
			<td> </td>
			<td><%= l(:label_monthly) %></td>
			<td><%= l(:label_ytd) %></td>
			<td> </td>
			<td><%= l(:label_monthly) %></td>
			<td><%= l(:label_ytd) %></td>
		</tr>	
	</thead>
	<tbody>
		<% 
			componentHash['e'] = componentHash['b'].concat(componentHash['a'])
			componentlength=componentHash['e'].length>componentHash['d'].length ? componentHash['e'].length : componentHash['d'].length
			totalEarnings = 0
			totalDeductions = 0
			totalYTDEarnings = 0
			totalYTDDeductions = 0
		%>
					
					
		<%for i in 0..componentlength-1 %>
			<tr>
				<% if componentHash['e'].length > i%>
					<td><b><%=h componentHash['e'][i][0]  %></b></td>
					<td><%=h componentHash['e'][i][2]%> <%=h componentHash['e'][i][1] %></td>
					<td><%=h componentHash['e'][i][2]%> <%=h componentHash['e'][i][3] %></td>
					<% 
						totalEarnings = totalEarnings + componentHash['e'][i][1] 
						totalYTDEarnings = totalYTDEarnings + componentHash['e'][i][3]
						earnCurrency = componentHash['e'][i][2]
					%>
				<%end%>	
				
				<% if componentHash['d'].length > i%>
					<td><b><%=h componentHash['d'][i][0]  %></b></td>
					<td><%=h componentHash['d'][i][2]%> <%=h componentHash['d'][i][1] %></td>
					<td><%=h componentHash['d'][i][2]%> <%=h componentHash['d'][i][3] %></td>
					<% 
						totalDeductions = totalDeductions + componentHash['d'][i][1]
						totalYTDDeductions = totalYTDDeductions + componentHash['d'][i][3]
						deductionCurrency = componentHash['d'][i][2]
					%>
				<%else%>
					<td></td>
					<td></td>
					<td></td>
				<%end%>	
			</tr>
		<%end%>
		<tr> 
			<td><b><%=l(:label_total_earning)%></b></td>
			<td><%=h earnCurrency %> <%=h totalEarnings %></td>
			<td><%=h earnCurrency %> <%=h totalYTDEarnings %></td>
			<td><b><%=l(:label_total_deduction)%></b></td>
			<td><%=h deductionCurrency %> <%=h totalDeductions %></td>
			<td><%=h deductionCurrency %> <%=h totalYTDDeductions %></td>
		</tr>
		
		<tr> 
			<td><b><%=l(:label_net_earning)%></b></td>
			<td><%=h earnCurrency %><%=h totalEarnings - totalDeductions %></td>
			<td><%=h earnCurrency %><%=h totalYTDEarnings - totalYTDDeductions %></td>
		</tr>	
	</tbody>		
	</table>	
	<div style="float:right;width:25%">
		
		<table>
			<tr>
				<td class="txt-align" ><b>Adhi Software PVT Ltd </b></td>
				
			</tr>
			<tr>
				<td class="txt-align" ><b>12/B-35, 6th Cross Road</b></td>
				
			</tr>
			<tr>
				<td class="txt-align"><b>SIPCOT IT Park</b></td>
				
			</tr>
			<tr>
				<td class="txt-align"><b>Siruseri - 603103</b></td>
				
			</tr>
			<tr>
				<td class="txt-align" ><b>Kancheepuram District
</b></td>
				
			</tr>
			<tr>
				<td class="txt-align"><b>Phone : 27470401

</b></td>
				
			</tr>
		</table>
	</div>
</div>
<% else %>
	<label><b><%= l(:label_no_data) %></b></label>
<% end %>


