<%= stylesheet_link_tag 'wk-time', :plugin => "redmine_wktime" %>
<div class="autoscroll">
	<% headerHash = controller.getIventoryListHeader  %>
	<% ratePerHash = getRatePerHash(false) %>
	<% assetTypeHash = getAssetTypeHash(false) %>
	<table class="list time-entries">
		<thead>
			<tr>	
				<%headerHash.values.each do |header|%>
					<th class="lbl-txt-align"><%= header %></th>
				<%end%>
				<th></th>
			</tr>
		</thead>
		<tbody>
			<% @productInventory.each do |entry| %>
				<tr>
					<% headerHash.keys.each do |colName|%>
						<% if colName == "rate_per" %>
							<td class="lbl-txt-align"><%=h entry.id.blank? ? ratePerHash[entry[colName]] : ratePerHash[entry.asset_property[colName]] %></td>
						<% elsif colName == "rate" || colName == "current_value" %>
							<td class="lbl-txt-align"><%=h (entry.id.blank? ? entry.asset_currency : entry.asset_property.currency) + " "  %><%=h entry.id.blank? ? entry[colName] : entry.asset_property[colName] %></td>
						<% elsif colName == "owner_type" %>
							<td class="lbl-txt-align"><%=h entry.id.blank? ? assetTypeHash[entry[colName]] : assetTypeHash[entry.asset_property[colName]]  %></td>
						<% elsif colName == "is_loggable" %>
							<td class="lbl-txt-align"><%=h checked_image entry.is_loggable?  %></td>
						<% elsif colName == "product_name" %>
							<td class="lbl-txt-align"><%=h entry.id.blank? ? entry[colName] : entry.product_item.product.name  %></td>
						<% elsif colName == "asset_name" %>
							<td class="lbl-txt-align"><%=h entry.id.blank? ? entry[colName] : entry.asset_property.name  %></td>
						<% elsif colName == "product_attribute_name" %>
							<td class="lbl-txt-align"><%=h entry.id.blank? ? entry[colName] : (entry.product_attribute.blank? ? "" : entry.product_attribute.name)  %></td>
						<% elsif colName == "location_name" %>
							<td class="lbl-txt-align"><%=h entry.id.blank? ? entry[colName] : entry.location.name  %></td>
						<% else %>
							<td class="lbl-txt-align"><%=h entry[colName] %></td>
						<% end %>
					<%end%>
					  <td align="center">
					  <% inventoryID = entry.id.blank? ? entry.inventory_item_id : entry.id %>
						  <%= link_to image_tag('edit.png'), {:controller => controller.controller_name, :action => 'edit', :inventory_item_id => inventoryID, :product_item_id => entry.product_item_id}, :title => l(:button_edit) %> 
						  <% if controller.hasDeletePermission %>
							<%= link_to image_tag('delete.png'), {:controller => controller.controller_name, :action => 'destroy', :inventory_item_id => inventoryID, :product_item_id => entry.product_item_id, :tab => controller.controller_name},  :data => {:confirm => l(:text_are_you_sure)}, :method => :delete, :title => l(:button_delete) %>
						  <% end %>
					  </td>
				</tr>
			<% end %>
		</tbody>
	</table>
</div>

